full_join(oms) %>%
slice(4:7) %>%
gt(groupname_col = "name", rowname_col = "Parámetros") %>%
tab_header(title = md("**Hoja de datos de parámetros de calidad de aire y meteorológicos**")) %>%
tab_options(
table.font.size = px(10),
column_labels.font.size = px(10),
data_row.padding = px(0.3)) %>%
cols_width(everything() ~ px(25))
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "save")
library(tidyverse)
library(openair)
library(openxlsx)
library(zoo)
library(ggthemes)
library(ggforce)
library(patchwork)
library(ggrepel)
library(glue)
library(kableExtra)
library(gt)
source("Scripts/ECA.R")
df <- ECA(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "lista")
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "save")
meses <- c("January" = "enero",
"February" = "febrero",
"March" = "marzo",
"April" = "abril",
"May" = "mayo",
"June" = "junio",
"July" = "julio",
"August" = "agosto",
"September" = "septiembre",
"October" = "octubre",
"November" = "noviembre",
"December" = "diciembre")
fech <- meses[[format(min(df$df$date),
format = "%B")]]
cod <- "EMCA - 02"
distrito <- "Alto de la Alianza"
lugar <- 'el Instituto de Educación Superior Público "Francisco  de Paula Gonzales Vigil"'
windRose(mydata = df$df, plot = F)
windRose(mydata = df$df, plot = F) -> a
a
windRose(mydata = df$df, plot = FALSE) -> a
a$data
round(a$data)
round(a$data$calm)
a$data
a$data$panel.fun
a$data$panel.fun[1]
round(a$data$panel.fun[1])
round(as.numeric(a$data$panel.fun[1]())
round(as.numeric(a$data$panel.fun[1]))
round(as.numeric(a$data$panel.fun[1]),2)
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "save")
cruda2
df <- ECA(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "save")
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil_cruda",
tipo = "save")
library(gt)
source("Scripts/ECA.R")
df <- ECA(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/pm_junio.csv",
fecha_inicio = "2024-06-21",
fecha_fin = "2024-06-30",
estacion = "unanue",
tipo = "lista")
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/pm_junio.csv",
fecha_inicio = "2024-06-21",
fecha_fin = "2024-06-30",
estacion = "unanue",
tipo = "save")
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/pm_junio.csv",
fecha_inicio = "2024-06-21",
fecha_fin = "2024-06-30",
estacion = "unanue",
tipo = "save")
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/pm_junio.csv",
fecha_inicio = "2024-06-21",
fecha_fin = "2024-06-30",
estacion = "unanue",
tipo = "save")
df$eca
truncc <- function(x, n){
as.integer(trunc(x*10^n))/10^n
}
truncc(15.9, 1)
truncc(15.1, 1)
truncc(24, 3)
truncc(24, 3)
truncc <- function(x, n){
as.integer(trunc(x*10^n))/10^n
}
View(df$eca)
source("Scripts/AQI.R")
aqi_index(df$eca)
library(tidyverse)
aqi_index(df$eca)
trunc(12.5555, 3)
trunc(12.2367, 3)
trunc(12.2367, 3)
trunc(12.2367, 3)
truncc <- function(x, n){
roun(trunc(x*10^n))/(10^n)
}
trunc(12.2367, 3)
truncc <- function(x, n){
as.integer(trunc(x*10^n))/(10^n)
}
trunc(12.2367, 3)
truncc <- function(x, n){
as.integer(trunc(x*10^n))/(10^n)
}
trunc(12.2367, 3)
as.integer(3413434)
as.integer(341343.23435646)
as.integer(341343.23435646)/10^3
truncc <- function(x, n){
x <- as.integer(trunc(x*10^n))/(10^n)
x
}
trunc(12.2367, 3)
trunc(34444.45)
trunc(3444.44667678, 3)
trunc(3444.44667678*1000)
trunc(3444.44667678*1000)/10^3
as.integer(trunc(25.3456767*10^3))/(10^3)
truncc <- function(x, n){
x <- as.integer(trunc(x*10^n))/(10^n)
x
}
trunc(12.236734325, 3)
truncc <- function(x, n){
x <- as.integer(trunc(x*10^n))/(10^n)
round(x,n)
}
trunc(12.236734325, 3)
truncc <- function(x, n){
x <- as.integer(trunc(x*10^n))/(10^n)
x
}
trunc(12.236734325, 3)
trunc(12.236734325, 2)
trunc(12.236734325, 6)
df$eca
df$eca %>% as.data.frame()
aqi_index(df$eca)
#| fig-height: 3.6
#| fig-width: 7
source("Scripts/AQI.R")
aqi_index(df$eca)
View(aqi_index(df$eca))
source("Scripts/AQI.R")
aqi_index(df$eca)
df$eca
24*1.96
24/1.96
truncc(c(12.354545, 12,3534), 2)
truncc(c(12.354545, 12.12334,3534, 1345324), 2)
df <- ECA(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "lista")
library(tidyverse)
library(openair)
library(openxlsx)
library(zoo)
library(ggthemes)
library(ggforce)
library(patchwork)
library(ggrepel)
library(glue)
library(kableExtra)
library(gt)
source("Scripts/ECA.R")
df <- ECA(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "lista")
df$eca
df$eca %>% as.data.frame()
library(tidyverse)
library(openair)
library(openxlsx)
library(zoo)
library(ggthemes)
library(ggforce)
library(patchwork)
library(ggrepel)
library(glue)
library(kableExtra)
library(gt)
source("Scripts/ECA.R")
df <- ECA(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/pm_junio.csv",
fecha_inicio = "2024-06-21",
fecha_fin = "2024-06-30",
estacion = "unanue",
tipo = "lista")
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/pm_junio.csv",
fecha_inicio = "2024-06-21",
fecha_fin = "2024-06-30",
estacion = "unanue",
tipo = "save")
meses <- c("January" = "enero",
"February" = "febrero",
"March" = "marzo",
"April" = "abril",
"May" = "mayo",
"June" = "junio",
"July" = "julio",
"August" = "agosto",
"September" = "septiembre",
"October" = "octubre",
"November" = "noviembre",
"December" = "diciembre")
fech <- meses[[format(min(df$df$date),
format = "%B")]]
cod <- "EMCA - 01"
distrito <- "Tacna"
lugar <- 'Prolongación Hipólito Unanue "Ex sede del Gobierno Regional de Tacna"'
View(df$eca)
23.98/1.96
23.98/1.96/1000
ppbozono <- function(param, factor)[
ppbozono <- function(param, factor){
param/factor/1000
}
df$eca %>% mutate(inca = ppbozono(o3))
df$eca %>% mutate(inca = ppbozono(o3, 1.96))
ppbozono <- function(param, factor){
param/factor
}
df$eca %>% mutate(inca = ppbozono(o3, 1.96))
df$eca %>% mutate(inca = ppbozono(o3, 1.96)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(o3, 1.96)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(so2, 2.62)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(so2, 1.15)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(so2, 1.15)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(co, 1.15)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(co, 1.15)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(co, 1.15)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(co/1000, 1.15)) %>% as.data.frame()
df$eca %>% mutate(inca = ppbozono(no2, 1.88)) %>% as.data.frame()
df$eca %>% mutate(o3ppb = ppbozono(o3, 1.96)) %>% as.data.frame() %>% select(o3ppb)
df$eca %>% mutate(so2ppb = ppbozono(so2, 2.62)) %>% as.data.frame() %>% select(so2ppb)
df$eca %>% mutate(coppm = ppbozono(co/1000, 1.15)) %>% as.data.frame(coppm)
df$eca %>% mutate(coppm = ppbozono(co/1000, 1.15)) %>% as.data.frame() %>% select(coppm)
ppbyppm <- function(param, factor){
param/factor
}
df$eca %>% mutate(
o3ppb = ppbozono(o3, 1.96),
so2ppb = ppbozono(so2, 2.62),
coppm = ppbozono(co/1000, 1.15),
no2ppb = ppbozono(no2, 1.88)
)
df$eca %>% mutate(
o3ppb = ppbozono(o3, 1.96),
so2ppb = ppbozono(so2, 2.62),
coppm = ppbozono(co/1000, 1.15),
no2ppb = ppbozono(no2, 1.88),
) %>% select(pm10, pm25, o3ppb, so2ppb, coppm, no2ppb)
# Factor de conversion:
ppbyppm <- function(param, factor){
param/factor
}
# Generando tabla de comparación:
df$eca %>% mutate(
o3ppb = ppbozono(o3, 1.96),
so2ppb = ppbozono(so2, 2.62),
coppm = ppbozono(co/1000, 1.15),
no2ppb = ppbozono(no2, 1.88),
) %>% select(fecha, pm10, pm25, o3ppb, so2ppb, coppm, no2ppb)
# Factor de conversion:
ppbyppm <- function(param, factor){
param/factor
}
# Generando tabla de comparación:
df$eca %>% mutate(
o3ppb = ppbozono(o3, 1.96),
so2ppb = ppbozono(so2, 2.62),
coppm = ppbozono(co/1000, 1.15),
no2ppb = ppbozono(no2, 1.88),
) %>% select(fecha, pm10, pm25, o3ppb, so2ppb, coppm, no2ppb)
# Generando tabla de comparación:
df$eca %>% mutate(
o3ppb = ppbozono(o3, 1.96),
so2ppb = ppbozono(so2, 2.62),
coppm = ppbozono(co/1000, 1.15),
no2ppb = ppbozono(no2, 1.88),
) %>% select(fecha, pm10, pm25, o3ppb, so2ppb, coppm, no2ppb) %>% as.data.frame()
# Generando tabla de comparación:
df$eca %>% mutate(
o3ppb = ppbozono(o3, 1.96),
so2ppb = ppbozono(so2, 2.62),
coppm = ppbozono(co/1000, 1.15),
no2ppb = ppbozono(no2, 1.88),
) %>% select(fecha, pm10, pm25, o3ppb, so2ppb, coppm, no2ppb) %>% as.data.frame()
# Generando tabla de comparación:
df$eca %>% mutate(
o3ppb = ppbyppm(o3, 1.96),
so2ppb = ppbyppm(so2, 2.62),
coppm = ppbyppm(co/1000, 1.15),
no2ppb = ppbyppm(no2, 1.88),
) %>% select(fecha, pm10, pm25, o3ppb, so2ppb, coppm, no2ppb) %>% as.data.frame()
library(tidyverse)
library(openair)
library(openxlsx)
library(zoo)
library(ggthemes)
library(ggforce)
library(patchwork)
library(ggrepel)
library(glue)
library(kableExtra)
library(gt)
source("Scripts/ECA.R")
df <- ECA(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil",
tipo = "lista")
source("Scripts/data_cruda.R")
cruda2 <- cruda(meteo = "input/CR1000_JULIO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/1405A227561402_2024-08-01_09-11-26.csv",
fecha_inicio = "2024-07-17",
fecha_fin = "2024-07-31",
estacion = "vigil_cruda",
tipo = "save")
meses <- c("January" = "enero",
"February" = "febrero",
"March" = "marzo",
"April" = "abril",
"May" = "mayo",
"June" = "junio",
"July" = "julio",
"August" = "agosto",
"September" = "septiembre",
"October" = "octubre",
"November" = "noviembre",
"December" = "diciembre")
fech <- meses[[format(min(df$df$date),
format = "%B")]]
cod <- "EMCA - 02"
distrito <- "Alto de la Alianza"
lugar <- 'el Instituto de Educación Superior Público "Francisco  de Paula Gonzales Vigil"'
# Factor de conversion:
ppbyppm <- function(param, factor){
param/factor
}
# Generando tabla de comparación:
df$eca %>% mutate(
o3ppb = ppbyppm(o3, 1.96),
so2ppb = ppbyppm(so2, 2.62),
coppm = ppbyppm(co/1000, 1.15),
no2ppb = ppbyppm(no2, 1.88),
) %>% select(fecha, pm10, pm25, o3ppb, so2ppb, coppm, no2ppb) %>% as.data.frame()
library(tidyverse)
library(openair)
library(openxlsx)
library(zoo)
library(ggthemes)
library(ggforce)
library(patchwork)
library(ggrepel)
library(glue)
library(kableExtra)
source("Scripts/ECA.R")
df <- ECA(meteo = "input/CR1000_AGOSTO_2024.csv",
gases = "input/gases_odria_agosto.csv",
pm = "input/pm_agosto_odria.csv",
fecha_inicio = "2024-08-08",
fecha_fin = "2024-08-18",
estacion = "Odría",
tipo = "lista")
meses <- c("January" = "enero",
"February" = "febrero",
"March" = "marzo",
"April" = "abril",
"May" = "mayo",
"June" = "junio",
"July" = "julio",
"August" = "agosto",
"September" = "septiembre",
"October" = "octubre",
"November" = "noviembre",
"December" = "diciembre")
fech <- meses[[format(min(df$df$date),
format = "%B")]]
cod <- "EMCA - 03"
windRose(mydata = df$df, paddle = F, cols = "Blues", breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4))
windRose(mydata = df$df, paddle = F, cols = "Blues", breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
RColorBrewer::brewer.pal(7, name = "Set1")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- RColorBrewer::brewer.pal(7, name = "Set1")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
coloreo <- RColorBrewer::brewer.pal(7, name = "Set2")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- RColorBrewer::brewer.pal(7, name = "Dark")
coloreo <- RColorBrewer::brewer.pal(7, name = "Dark2")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
windRose(mydata = df$df, paddle = F, cols = "inferno", breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- RColorBrewer::brewer.pal(7, name = "PuOr")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- RColorBrewer::brewer.pal(7, name = "PRGn")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- RColorBrewer::brewer.pal(4, name = "PRGn")
coloreo
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- c("blue","#7B3294","#C2A5CF","#A6DBA0","#008837", "red")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
RColorBrewer::brewer.pal(4, "dark2")
RColorBrewer::brewer.pal(4, "Dark2")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- c("blue","#E7298A","#7B3294","#D95F02","#A6DBA0","#008837", "red")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
RColorBrewer::brewer.pal(4, "Blues")
coloreo <- c("#2171B5","#E7298A","#7B3294","#D95F02","#A6DBA0","#008837", "red")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- c("#2171B5","#E7298A","#7B3294","#D95F02","#A6DBA0","#008837", "darkgreen")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- c("#D95F02","darkgreen","#A6DBA0","#008837","#E7298A","#7B3294","#2171B5")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- c("#D95F02","darkgreen","#A6DBA0","#008837","#2171B5","#7B3294","#E7298A")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
#| fig-cap: "Rosa de vientos"
#| fig-height: 4.5
coloreo <- c("#D95F02","yellow","#A6DBA0","#008837","#2171B5","#7B3294","#E7298A")
windRose(mydata = df$df, paddle = F, cols = coloreo, breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
coloreo <- c("#D95F02","yellow","#A6DBA0","#008837","#2171B5","#7B3294","#E7298A")
windRose(mydata = df$df, paddle = F, cols = coloreo,
breaks = c(0,0.2,0.3,1.5, 1.6, 3.3, 3.4, 5.4), key.position = "right")
